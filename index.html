<!DOCTYPE html>
<html lang="pt-br" ng-app="listaTelefonica">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Lista Telefônica</title>

    <!-- Style -->
    <link rel="stylesheet" type="text/css" href="lib/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/app.css" />
    <!-- Style -->

    <!-- Scripts -->
    <script src="lib/angular/angular.js"></script>
    <script src="js/app.js"></script>

    <!-- Constants -->
    <script src="js/constants/configValue.js"></script>
    <!-- Constants -->

    <!-- Controllers -->
    <script src="js/controllers/listaTelefonicaCtrl.js"></script>
    <!-- Controllers -->

    <!-- Directives -->
    <script src="js/directives/uiAlertDirective.js"></script>
    <script src="js/directives/uiPhoneDirective.js"></script>
    <script src="js/directives/uiDateDirective.js"></script>
    <!-- Directives -->

    <!-- Filters -->
    <script src="js/filters/nameFilter.js"></script>
    <script src="js/filters/ellipsisFilter.js"></script>
    <!-- Filters -->

    <!-- Services -->
    <script src="js/services/contatosApiService.js"></script>
    <script src="js/services/operadorasApiService.js"></script>
    <!-- Services -->
    <!-- Scripts -->
  </head>

  <!-- View -->
  <body ng-controller="listaTelefonicaCtrl">
    <!-- Lista Telefônica -->
    <div class="jumbotron">
      <h3>{{app}}</h3>

      <!-- Campo de busca -->
      <input class="form-control" type="text" ng-model="criterioDeBusca" placeholder="O que você está buscando?" />
      <!-- Campo de busca -->

      <!-- Mensagens de erro -->
      <ui-alert title="title" message="error" ng-show="error"></ui-alert>
      <!-- Mensagens de erro -->

      <!-- Lista de contatos -->
      <table class="table table-striped" ng-show="contatos.length > 0">
        <tr ng-init="ordernarPor('nome')">
          <th></th>
          <th><a href="" ng-click="ordernarPor('nome')">Nome</a></th>
          <th><a href="" ng-click="ordernarPor('telefone')">Telefone</a></th>
          <th><a href="">Aniversario</a></th>
          <th><a href="" ng-click="ordernarPor('operadora')">Operadora</a></th>
        </tr>
        <tr
          ng-class="{bold: contato.selecionado}"
          ng-repeat="contato in contatos | filter:criterioDeBusca | orderBy:criterioDeOrdenacao:direcaoDaOrdenacao"
        >
          <td><input class="pointer" role="button" type="checkbox" ng-model="contato.selecionado" /></td>
          <td>{{contato.nome | name | ellipsis:15}}</td>
          <td>{{contato.telefone}}</td>
          <td>{{contato.aniversario}}</td>
          <td>{{contato.operadora.nome}}</td>
        </tr>
      </table>
      <!-- Lista de contatos -->

      <hr />

      <!-- Inserir contato -->
      <form name="contatoForm">
        <input name="nome" class="form-control" type="text" ng-model="contato.nome" placeholder="Nome" required />

        <input
          name="telefone"
          class="form-control"
          type="text"
          ng-model="contato.telefone"
          ui-phone
          placeholder="Tel.: (XX) XXXXX-XXXX"
          minlength="15"
          maxlength="15"
          required
        />

        <input
          name="aniversario"
          class="form-control"
          type="text"
          ng-model="contato.aniversario"
          ui-date
          placeholder="Aniversario: DD/MM"
          minlength="5"
          maxlength="5"
          required
        />

        <select
          name="operadora"
          class="form-select"
          role="button"
          ng-model="contato.operadora"
          ng-options="operadora.nome group by operadora.categoria for operadora in operadoras | orderBy:'nome' "
          required
        >
          <option value="">Selecione uma operadora</option>
        </select>

        <!-- Mensagens de alerta -->
        <div ng-show="contatoForm.nome.$error.required && contatoForm.nome.$dirty" class="alert alert-danger">
          Por favor, preencha o campo nome!
        </div>

        <div ng-show="contatoForm.telefone.$error.required && contatoForm.telefone.$dirty" class="alert alert-danger">
          Por favor, preencha o campo telefone!
        </div>
        <div ng-show="contatoForm.telefone.$error.minlength && contatoForm.telefone.$dirty" class="alert alert-danger">
          O campo telefone deve ser corretamente preenchido!
        </div>

        <div
          ng-show="contatoForm.aniversario.$error.required && contatoForm.aniversario.$dirty"
          class="alert alert-danger"
        >
          Por favor, preencha o campo aniversário!
        </div>
        <div
          ng-show="contatoForm.aniversario.$error.minlength && contatoForm.aniversario.$dirty"
          class="alert alert-danger"
        >
          O campo aniversario deve ser corretamente preenchido!
        </div>

        <div ng-show="contatoForm.operadora.$invalid && contatoForm.operadora.$dirty" class="alert alert-danger">
          Por favor, preencha o campo operadora!
        </div>
        <!-- Mensagens de alerta -->

        <div class="d-grid">
          <button class="btn btn-primary" ng-click="adicionarContato(contato)" ng-disabled="contatoForm.$invalid">
            Adicionar Contato
          </button>
        </div>
      </form>
      <!-- Inserir contato -->

      <!-- Excluir contatos -->
      <div class="d-grid">
        <button
          class="btn btn-danger"
          ng-click="excluirContatos(contatos)"
          ng-disabled="!isContatoSelecionado(contatos)"
          ng-show="isContatoSelecionado(contatos)"
        >
          Excluir Selecionados
        </button>
      </div>
      <!-- Excluir contatos -->
    </div>
    <!-- Lista Telefônica -->

    <!-- Footer -->
    <div ng-include=" 'view/footer.html' "></div>
    <!-- Footer -->
  </body>
  <!-- View -->
</html>
